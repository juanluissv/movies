{"ast":null,"code":"import axios from'axios';import{USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_REGISTER_FAIL,USER_LOGIN_REQUEST,USER_LOGIN_SUCCESS,USER_LOGIN_FAIL,USER_LOGOUT,USER_DETAILS_REQUEST,USER_DETAILS_SUCCESS,USER_DETAILS_FAIL,USER_DETAILS_RESET}from'../constants/userConstants';export const login=(email,password)=>async dispatch=>{try{dispatch({type:USER_LOGIN_REQUEST});const config={headers:{'Content-Type':'application/json'}};const{data}=await axios.post('/api/users/login',{email,password},config);dispatch({type:USER_LOGIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));}catch(error){dispatch({type:USER_LOGIN_FAIL,payload:error.response});}};export const logout=()=>dispatch=>{localStorage.removeItem('userInfo');dispatch({type:USER_LOGOUT});dispatch({type:USER_DETAILS_RESET});};export const register=(name,email,password)=>async dispatch=>{try{dispatch({type:USER_REGISTER_REQUEST});const config={headers:{'Content-Type':'application/json'}};const{data}=await axios.post('/api/users',{name,email,password},config);dispatch({type:USER_REGISTER_SUCCESS,payload:data});dispatch({type:USER_LOGIN_SUCCESS,payload:data});localStorage.setItem('userInfo',JSON.stringify(data));}catch(error){dispatch({type:USER_REGISTER_FAIL,payload:error.response});}};export const getUserDetails=()=>async(dispatch,getState)=>{try{dispatch({type:USER_DETAILS_REQUEST});const{userLogin:{userInfo}}=getState();const config={headers:{'Content-Type':'applocation/json',Authorization:\"Bearer \".concat(userInfo.token)}};const{data}=await axios.get('/api/users/profile',config);dispatch({type:USER_DETAILS_SUCCESS,payload:data});}catch(error){dispatch({type:USER_DETAILS_FAIL,payload:error.response});}};","map":{"version":3,"names":["axios","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_LOGIN_REQUEST","USER_LOGIN_SUCCESS","USER_LOGIN_FAIL","USER_LOGOUT","USER_DETAILS_REQUEST","USER_DETAILS_SUCCESS","USER_DETAILS_FAIL","USER_DETAILS_RESET","login","email","password","dispatch","type","config","headers","data","post","payload","localStorage","setItem","JSON","stringify","error","response","logout","removeItem","register","name","getUserDetails","getState","userLogin","userInfo","Authorization","concat","token","get"],"sources":["/Users/juanluissv/Desktop/movies/frontend/src/actions/userActions.js"],"sourcesContent":["import axios from 'axios';\nimport { \n    USER_REGISTER_REQUEST, \n    USER_REGISTER_SUCCESS, \n    USER_REGISTER_FAIL, \n    USER_LOGIN_REQUEST,\n    USER_LOGIN_SUCCESS,\n    USER_LOGIN_FAIL,\n    USER_LOGOUT,\n    USER_DETAILS_REQUEST,\n    USER_DETAILS_SUCCESS,\n    USER_DETAILS_FAIL,\n    USER_DETAILS_RESET\n} from '../constants/userConstants';\n\nexport const login = (email, password) => async(dispatch) => {\n    try {\n        dispatch({\n            type: USER_LOGIN_REQUEST\n        })\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const { data } = await axios.post('/api/users/login', {email, password }, config)\n\n        dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: data\n        })\n        localStorage.setItem('userInfo', JSON.stringify(data))\n    } catch (error) {\n        dispatch({\n            type: USER_LOGIN_FAIL,\n            payload: error.response\n        })\n    }\n}\n\nexport const logout = () => (dispatch) => {\n    localStorage.removeItem('userInfo')\n    dispatch({ type: USER_LOGOUT })\n    dispatch({ type: USER_DETAILS_RESET })\n}\n\n\nexport const register = (name, email, password) => async(dispatch) => {\n    try {\n        dispatch({\n            type: USER_REGISTER_REQUEST\n        })\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }\n\n        const { data } = await axios.post('/api/users', {name, email, password}, config)\n\n        dispatch({\n            type:USER_REGISTER_SUCCESS,\n            payload: data\n        })\n\n        dispatch({\n            type: USER_LOGIN_SUCCESS,\n            payload: data\n        })\n        localStorage.setItem('userInfo', JSON.stringify(data))\n\n    } catch (error) {\n        dispatch({\n            type: USER_REGISTER_FAIL,\n            payload: error.response\n        })\n    }\n}\n\n\nexport const getUserDetails = () => async(dispatch, getState) => {\n    \n    try {\n        dispatch({\n            type: USER_DETAILS_REQUEST\n        })\n\n        const { userLogin: { userInfo } } = getState()\n\n        const config = {\n            headers: {\n                'Content-Type': 'applocation/json',\n                Authorization: `Bearer ${userInfo.token}`\n            }\n        }\n\n        const { data } = await axios.get('/api/users/profile', config)\n\n        dispatch({\n            type: USER_DETAILS_SUCCESS,\n            payload: data\n        })\n    } catch(error) {\n        dispatch({\n            type: USER_DETAILS_FAIL,\n            payload: error.response\n        })\n\n    }\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}